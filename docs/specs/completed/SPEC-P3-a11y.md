# åŠŸèƒ½åç§°ï¼šå¯è®¿é—®æ€§ (Accessibility / a11y)

> **å®šä½**ï¼šWebUI ä½“éªŒç²¾ç»†åŒ– â€” ä½¿åº”ç”¨å¯¹é”®ç›˜ç”¨æˆ·ã€å±å¹•é˜…è¯»å™¨ç”¨æˆ·ã€è‰²è§‰éšœç¢ç”¨æˆ·å‡å¯ç”¨

---

## 1. ä¸šåŠ¡ç›®æ ‡ï¼ˆä¸€å¥è¯ï¼‰

è¡¥é½ ARIA æ ‡ç­¾ã€é”®ç›˜å¯¼èˆªã€ç„¦ç‚¹ç®¡ç†ã€è‰²å½©å¯¹æ¯”åº¦ï¼Œè¾¾åˆ° WCAG 2.1 AA çº§æ ‡å‡†ã€‚

---

## 2. éªŒæ”¶æ ‡å‡†ï¼ˆGiven-When-Then æ ¼å¼ï¼‰

### AC-1ï¼šARIA æ ‡ç­¾è¦†ç›–
- **Given** ä½¿ç”¨ axe-core æˆ– Lighthouse è¿è¡Œå¯è®¿é—®æ€§å®¡è®¡
- **When** æ‰«ææ‰€æœ‰é¡µé¢
- **Then** æ—  "missing label" æˆ– "missing role" ç±»å‹çš„é”™è¯¯

### AC-2ï¼šé”®ç›˜å¯¼èˆª
- **Given** ç”¨æˆ·ä»…ä½¿ç”¨é”®ç›˜
- **When** Tab æµè§ˆ Dashboard â†’ Search â†’ Settings
- **Then** æ‰€æœ‰äº¤äº’å…ƒç´ å¯è¾¾ä¸”ç„¦ç‚¹æŒ‡ç¤ºå™¨æ¸…æ™°å¯è§

### AC-3ï¼šè‰²å½©å¯¹æ¯”åº¦
- **Given** æš—è‰²æ¨¡å¼ä¸‹æ–‡æœ¬å’ŒèƒŒæ™¯
- **When** ä½¿ç”¨ Chrome DevTools å¯¹æ¯”åº¦æ£€æŸ¥å™¨
- **Then** æ­£æ–‡æ–‡æœ¬å¯¹æ¯”åº¦ â‰¥ 4.5:1ï¼Œå¤§æ–‡æœ¬ â‰¥ 3:1

### AC-4ï¼šåŠ¨ç”»åå¥½
- **Given** ç³»ç»Ÿè®¾ç½® `prefers-reduced-motion: reduce`
- **When** è®¿é—®ä»»æ„é¡µé¢
- **Then** æ‰€æœ‰åŠ¨ç”»ï¼ˆè·¯ç”±è¿‡æ¸¡ã€åˆ—è¡¨å…¥åœºã€pulseï¼‰è¢«ç¦ç”¨æˆ–ç®€åŒ–

---

## 3. æŠ€æœ¯è®¾è®¡ & éåŠŸèƒ½éœ€æ±‚

### 3.1 ARIA è¡¥å……æ¸…å•

| å…ƒç´  | éœ€è¦æ·»åŠ  |
|------|----------|
| BottomNav æŒ‰é’® | `aria-label` (å¦‚ "Dashboard"ã€"Search") |
| æœç´¢è¾“å…¥æ¡† | `aria-label="Search messages"` |
| çŠ¶æ€æŒ‡ç¤ºç‚¹ | `aria-label` æè¿°çŠ¶æ€ (å¦‚ "MeiliSearch connected") |
| å¯¹è¯æ¡†/æ¨¡æ€ | `role="dialog"` + `aria-modal="true"` |
| åŠ è½½åŒºåŸŸ | `aria-busy="true"` + `aria-live="polite"` |
| Toast åŒºåŸŸ | `role="status"` + `aria-live="polite"` |
| è¡¨å•è¾“å…¥ | `<label>` å…³è”æˆ– `aria-label` |

### 3.2 ç„¦ç‚¹ç®¡ç†

```css
/* ç»Ÿä¸€ç„¦ç‚¹ç¯ */
*:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}
```

### 3.3 reduced-motion

```css
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
```

### 3.4 éåŠŸèƒ½éœ€æ±‚

- **æ ‡å‡†**ï¼šWCAG 2.1 AA çº§
- **å·¥å…·**ï¼šä½¿ç”¨ `axe-core` æˆ– Lighthouse CI è‡ªåŠ¨åŒ–å®¡è®¡
- **ä¸ç ´åè®¾è®¡**ï¼šç„¦ç‚¹ç¯é¢œè‰²åŒ¹é…ä¸»é¢˜ï¼Œä¸ä½¿ç”¨æµè§ˆå™¨é»˜è®¤è“è‰²

---

## 4. ä»»åŠ¡æ‹†åˆ†

- [ ] **Task 1.1** â€” ğŸ“‹ åŸºçº¿å®¡è®¡ (30 min)
  - ä½¿ç”¨ Lighthouse å¯¹æ‰€æœ‰é¡µé¢è¿è¡Œ Accessibility å®¡è®¡
  - è®°å½•æ‰€æœ‰ errors å’Œ warnings

- [ ] **Task 1.2** â€” ğŸ”§ ARIA æ ‡ç­¾è¡¥å…… (40 min)
  - éå†æ‰€æœ‰äº¤äº’å…ƒç´ æ·»åŠ  `aria-label`
  - æ·»åŠ  `role` å±æ€§
  - å…³è” `<label>` ä¸è¡¨å•æ§ä»¶

- [ ] **Task 1.3** â€” ğŸ”§ é”®ç›˜å¯¼èˆªä¼˜åŒ– (30 min)
  - Tab é¡ºåºåˆç†åŒ–
  - æ¨¡æ€æ¡†ç„¦ç‚¹é”å®š
  - Enter/Escape å¿«æ·é”®

- [ ] **Task 1.4** â€” ğŸ”§ ç»Ÿä¸€ç„¦ç‚¹ç¯ + å¯¹æ¯”åº¦ä¿®å¤ (30 min)
  - æ·»åŠ å…¨å±€ `:focus-visible` æ ·å¼
  - ä¿®å¤å¯¹æ¯”åº¦ä¸è¾¾æ ‡çš„æ–‡æœ¬é¢œè‰²

- [ ] **Task 1.5** â€” ğŸ”§ reduced-motion é€‚é… (15 min)
  - æ·»åŠ å…¨å±€ CSS åª’ä½“æŸ¥è¯¢
  - framer-motion æ¡ä»¶ç¦ç”¨ï¼ˆè‹¥å·²å¼•å…¥ï¼‰

- [ ] **Task 1.6** â€” âœ… éªŒè¯ (20 min)
  - å†æ¬¡ Lighthouse Accessibility å®¡è®¡
  - çº¯é”®ç›˜æµè§ˆå…¨éƒ¨é¡µé¢
  - `npm run build` é›¶é”™è¯¯

---

## 5. E2E æµ‹è¯•ç”¨ä¾‹æ¸…å•

| # | æµ‹è¯•ç”¨ä¾‹ | é¢„æœŸç»“æœ |
|---|---------|---------|
| T1 | Lighthouse Accessibility è¯„åˆ† | â‰¥ 85 åˆ† |
| T2 | çº¯é”®ç›˜ Tab æµè§ˆæ‰€æœ‰é¡µé¢ | æ‰€æœ‰äº¤äº’å…ƒç´ å¯è¾¾ |
| T3 | æœç´¢æ¡†æ— æ–‡å­—æ—¶ Tab èšç„¦ | ç„¦ç‚¹ç¯æ¸…æ™°å¯è§ |
| T4 | æš—è‰²æ¨¡å¼æ­£æ–‡å¯¹æ¯”åº¦ | â‰¥ 4.5:1 |
| T5 | `prefers-reduced-motion: reduce` | åŠ¨ç”»ç¦ç”¨ |
| T6 | å±å¹•é˜…è¯»å™¨ï¼ˆVoiceOver/NVDAï¼‰ | å¯æœ—è¯»æŒ‰é’®æ ‡ç­¾å’ŒçŠ¶æ€ |

---

## 6. å®ç°ç¬”è®° & æ¶æ„å†³ç­–è®°å½•ï¼ˆADRï¼‰

### ADR-017ï¼šç›®æ ‡ WCAG AA è€Œé AAA

- **èƒŒæ™¯**ï¼šå¯è®¿é—®æ€§æ ‡å‡†åˆ†ä¸º A / AA / AAA ä¸‰çº§ã€‚
- **å†³å®š**ï¼šç›®æ ‡ WCAG 2.1 AA çº§ã€‚
- **ç†ç”±**ï¼š
  1. AA æ˜¯è¡Œä¸šæ™®éæ ‡å‡†
  2. AAA çš„ 7:1 å¯¹æ¯”åº¦è¦æ±‚å¯èƒ½é™åˆ¶è®¾è®¡è‡ªç”±åº¦
  3. AA è¦†ç›–ç»å¤§å¤šæ•°å¯è®¿é—®æ€§éœ€æ±‚
- **åæœ**ï¼šå¯é€æ­¥æ”¹è¿›è‡³éƒ¨åˆ† AAA æ ‡å‡†é¡¹ï¼Œä½†ä¸ä½œä¸ºéªŒæ”¶ç¡¬æ€§æŒ‡æ ‡ã€‚
