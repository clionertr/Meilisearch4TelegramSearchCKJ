# webui-example/ å…¨é¢å®¡æŸ¥æŠ¥å‘Šï¼ˆæ•´åˆç‰ˆï¼‰

> ç»¼åˆ Antigravity ä»£ç å®¡æŸ¥ + CDOEX å®æµ‹éªŒè¯

## ç»“è®ºï¼šâš ï¸ å¯å¯åŠ¨ã€éƒ¨åˆ†å¯ç”¨ã€æœªè¾¾åˆ°å®Œæ•´å¯ç”¨

- **èƒ½è¿è¡Œ UI**ï¼šâœ… æ˜¯
- **èƒ½åšç™»å½• + æœç´¢**ï¼šâš ï¸ æ¡ä»¶å¯ç”¨ï¼ˆéœ€åç«¯å¯è¾¾ï¼Œä¸”æ­£ç¡®é…ç½® `VITE_API_URL` æˆ– proxyï¼‰
- **èƒ½å®ŒæˆåŒæ­¥ç®¡ç†/å­˜å‚¨ç®¡ç†/AI é…ç½®çš„çœŸå®ä¸šåŠ¡é—­ç¯**ï¼šâŒ å¦ï¼ˆç›®å‰æ˜¯å±•ç¤ºå£³ï¼‰

### å®æµ‹è®°å½•ï¼ˆCDOEXï¼‰

| æµ‹è¯• | ç»“æœ |
|------|------|
| `npm ci` | âœ… æˆåŠŸ |
| `npm run build` | âš ï¸ æˆåŠŸï¼Œä½†å‘Šè­¦ `/index.css doesn't exist` |
| `npm run dev` | âœ… å‰ç«¯å¯å¯åŠ¨ |
| `npx tsc --noEmit` | âŒ å¤±è´¥ï¼ˆ`ImportMeta.env` ç±»å‹ç¼ºå¤±ï¼‰ |
| åç«¯ api-only çƒŸæµ‹ | âœ… `/health`ã€`/search`ã€`/ws/status` å¯è¾¾ï¼›`/auth/send-code` è¿”å› Telegram é™æµï¼ˆé“¾è·¯é€šï¼‰ |

---

## æŒ‰ä¼˜å…ˆçº§åˆ†çº§

### ğŸ”´ P0 â€” é˜»å¡"æ­£å¸¸è¿è¡Œ/å¼€ç®±å¯ç”¨"

| # | é—®é¢˜ | è¯´æ˜ |
|---|------|------|
| 1 | **é»˜è®¤ API åœ°å€ç­–ç•¥æ‰“åˆ° Vite æœ¬èº«** | é»˜è®¤ base URL æ˜¯ç›¸å¯¹è·¯å¾„ `/api/v1`ï¼ŒVite æœªé…ç½® `server.proxy`ï¼ŒREADME ä¹Ÿæœªè¦æ±‚é…ç½® `VITE_API_URL`ã€‚**å®æµ‹**ï¼šè®¿é—® `http://127.0.0.1:4173/api/v1/search?q=test` è¿”å›çš„æ˜¯ HTML å‰ç«¯å£³ã€‚æ¶‰åŠ [client.ts:4](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/src/api/client.ts#L4)ã€[useWebSocket.ts:4](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/src/hooks/useWebSocket.ts#L4)ã€[vite.config.ts:8](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/vite.config.ts#L8) |
| 2 | **ç¼ºå°‘è”è°ƒå¿…éœ€æ¡ä»¶çš„æ–‡æ¡£é—­ç¯** | [README.md](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/README.md) ä»æ˜¯ AI Studio æ¨¡æ¿æ–‡æ¡ˆï¼Œåªæ `GEMINI_API_KEY`ï¼›å®é™…ç³»ç»Ÿè¦æ±‚åç«¯ API + MeiliSearch + Telegram é…ç½®ã€‚ |
| 3 | **[index.html](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/index.html) import map ä¸ Vite å†²çª** | [index.html:48-57](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/index.html#L48-L57) å°† `react`/`react-dom` æŒ‡å‘ esm.sh CDNã€‚Vite åŒæ—¶ä» `node_modules` è§£æåŒååŒ…ï¼ŒReact ä¸èƒ½æœ‰ä¸¤ä»½å®ä¾‹ï¼Œä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚ |

### ğŸŸ  P1 â€” æ ¸å¿ƒåŠŸèƒ½ç¼ºå¤± & å¯ç»´æŠ¤æ€§

| # | é—®é¢˜ | è¯´æ˜ |
|---|------|------|
| 4 | **TypeScript ç±»å‹åŸºç¡€ä¸å®Œæ•´ï¼Œtsc æ— æ³•é€šè¿‡** | ä½¿ç”¨ `import.meta.env` ä½† [tsconfig.json:13](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/tsconfig.json#L13) çš„ `types` åªæœ‰ `node`ï¼Œç¼ºå°‘ `vite/client`ã€‚**å®æµ‹ `npx tsc --noEmit` å¤±è´¥**ã€‚ |
| 5 | **6 ä¸ªé¡µé¢å®Œå…¨ç¡¬ç¼–ç ï¼Œæœªå¯¹æ¥å·²æœ‰åç«¯ API** | Dashboard / Settings / SyncedChats / SelectChats / Storage / AIConfig å…¨æ˜¯å‡æ•°æ®ã€‚åç«¯å·²æœ‰ `/status`ã€`/client/*`ã€`/config/*` å¯å¯¹æ¥ã€‚ï¼ˆè¯¦è§ä¸‹æ–¹å¯¹æ¥çŠ¶æ€è¡¨ï¼‰ |
| 6 | **å‰ç«¯ç¼ºå°‘å¤§é‡åç«¯ API service** | [src/api/](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/src/api) åªæœ‰ [auth.ts](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/src/api/auth.ts) å’Œ [search.ts](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/src/api/search.ts)ã€‚ç¼ºå°‘ `status.ts`ã€[config.ts](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/vite.config.ts)ã€`control.ts`ã€‚ |
| 7 | **ç™»å½• UX ä¸åç«¯è§„åˆ™ä¸ä¸€è‡´** | [Login.tsx:91](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/pages/Login.tsx#L91) placeholder ä¸º `+1 234 567 8900`ï¼ˆå¸¦ç©ºæ ¼ï¼‰ï¼Œä½†åç«¯ [auth.py:60](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/src/tg_search/api/routes/auth.py#L60) è¦æ±‚ä¸¥æ ¼ `^\+\d{7,15}$`ã€‚ç”¨æˆ·ç…§ç€æç¤ºå¡«å†™å¿…å®šå¤±è´¥ã€‚ |

### ğŸŸ¡ P2 â€” è´¨é‡ä¸éƒ¨ç½²éŸ§æ€§

| # | é—®é¢˜ | è¯´æ˜ |
|---|------|------|
| 8 | **ç¼ºå°‘ `index.css`** | [index.html:59](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/index.html#L59) å¼•ç”¨ `/index.css`ï¼Œæ–‡ä»¶ä¸å­˜åœ¨ã€‚build æœ‰å‘Šè­¦ï¼Œè¿è¡Œæ—¶ 404ã€‚ |
| 9 | **å¼ºä¾èµ–å¤–éƒ¨ CDN** | Tailwind ([index.html:7](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/index.html#L7)) ä½¿ç”¨"ä»…ä¾›è¯•éªŒ"çš„ CDN Play ç‰ˆï¼Œä¸æ”¯æŒç”Ÿäº§æ„å»ºã€‚Google Fontsã€Material Symbols ä¹Ÿæ˜¯ CDN åŠ è½½ï¼Œç¦»çº¿/å—é™ç½‘ç»œä¸‹æ ·å¼é€€åŒ–ã€‚ |
| 10 | **npm ä¾èµ–å­˜åœ¨é«˜å±æ¼æ´** | `npm audit` æŠ¥ **5 ä¸ª high**ï¼Œå« axiosã€‚å‚è€ƒ [package.json:14](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/package.json#L14) |
| 11 | **[SelectChats.tsx](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/pages/SelectChats.tsx) ä½¿ç”¨ `class` é `className`** | [SelectChats.tsx:52](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/pages/SelectChats.tsx#L52) `<img class=...>` åœ¨ JSX ä¸­æ— æ•ˆã€‚ |
| 12 | **[types.ts](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/types.ts) å’Œ [src/api/search.ts](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/src/api/search.ts) ç±»å‹é‡å¤** | ä¸¤å¤„éƒ½å®šä¹‰äº† [SearchResult](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/src/api/search.ts#22-30)ï¼Œå­—æ®µä¸ä¸€è‡´ï¼Œæœ‰å‘½åå†²çªã€‚ |
| 13 | **Dashboard æœç´¢æ¡† / Search filter chips / BottomNav Profile æŒ‰é’®æ— åŠŸèƒ½** | å¤šå¤„ UI å…ƒç´ æ˜¯çº¯è£…é¥°ï¼Œæ— äº¤äº’é€»è¾‘ã€‚ |
| 14 | **[geminiService.ts](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/services/geminiService.ts) æœªè¢«ä»»ä½•ç»„ä»¶ä½¿ç”¨** | [geminiService.ts](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/services/geminiService.ts) å¯¼å‡ºäº† `geminiService` å•ä¾‹ä½†ä»æœª importã€‚ |

### ğŸ”µ P3 â€” æ¶æ„å’Œå®‰å…¨

| # | é—®é¢˜ | è¯´æ˜ |
|---|------|------|
| 15 | **GEMINI_API_KEY æš´éœ²åˆ°å‰ç«¯** | [vite.config.ts](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/vite.config.ts) å°†å¯†é’¥æ³¨å…¥ `process.env.API_KEY`ï¼Œä¼šè¢«æ‰“åŒ…åˆ° JS ä¸­ï¼Œä»»ä½•ç”¨æˆ·å¯åœ¨ DevTools çœ‹åˆ°ã€‚ |
| 16 | **WebSocket URL ä¸å¤„ç† HTTPS** | [useWebSocket.ts:4](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/src/hooks/useWebSocket.ts#L4) å›é€€åˆ° `ws://`ï¼ŒHTTPS é¡µé¢åº”ä½¿ç”¨ `wss://`ã€‚ |
| 17 | **ç›®å½•ç»“æ„æ··ä¹±** | æºç åˆ†æ•£åœ¨æ ¹ç›®å½• / `pages/` / `components/` / `services/` / `src/` ç­‰ä¸åŒå±‚çº§ã€‚ |
| 18 | **æ—  ESLint / Prettier / æµ‹è¯•** | é›¶ä»£ç è§„èŒƒå·¥å…·ï¼ŒTypeScript strict æœªå¯ç”¨ï¼Œæ— ä»»ä½•æµ‹è¯•ã€‚ |

---

## å¯¹æ¥çŠ¶æ€æ€»è§ˆ

| å‰ç«¯é¡µé¢ | åç«¯ API å¯¹æ¥ | æ•°æ®æ¥æº |
|----------|--------------|----------|
| Login âœ… | `/auth/send-code`, `/auth/signin` | çœŸå® API |
| Search âœ… | `/search` | çœŸå® API |
| Dashboard âŒ | æ—  | 100% ç¡¬ç¼–ç  |
| Settings âŒ | æ—  | 100% ç¡¬ç¼–ç  |
| Storage âŒ | æ—  | 100% ç¡¬ç¼–ç  |
| SyncedChats âŒ | æ—  | 100% ç¡¬ç¼–ç  |
| SelectChats âŒ | æ—  | 100% ç¡¬ç¼–ç  |
| AIConfig âŒ | æ—  | 100% ç¡¬ç¼–ç  |

## åç«¯å¯ç”¨ä½†å‰ç«¯æœªå¯¹æ¥çš„ API

| åç«¯ç«¯ç‚¹ | åŠŸèƒ½ | åº”å¯¹æ¥åˆ° |
|----------|------|----------|
| `GET /api/v1/status` | ç³»ç»ŸçŠ¶æ€ | Dashboard, Settings |
| `GET /api/v1/status/dialogs` | å¯¹è¯åˆ—è¡¨ | SyncedChats, SelectChats |
| `GET /api/v1/status/progress` | ä¸‹è½½è¿›åº¦ | Dashboard, SyncedChats |
| `GET /api/v1/config` | è·å–é…ç½® | Settings, AIConfig |
| `POST/DELETE /api/v1/config/whitelist` | ç™½åå•ç®¡ç† | SelectChats |
| `POST/DELETE /api/v1/config/blacklist` | é»‘åå•ç®¡ç† | SelectChats |
| `POST /api/v1/client/start` | å¯åŠ¨å®¢æˆ·ç«¯ | Dashboard |
| `POST /api/v1/client/stop` | åœæ­¢å®¢æˆ·ç«¯ | Settings |
| `GET /api/v1/client/status` | å®¢æˆ·ç«¯çŠ¶æ€ | Dashboard |
| `GET /api/v1/search/stats` | æœç´¢ç»Ÿè®¡ | Storage |

---

## æœ€å°"å¯æ­£å¸¸è¿è¡Œ"è¡¥é½æ¸…å•ï¼ˆæŒ‰æ‰§è¡Œé¡ºåºï¼‰

1. **ä¿® P0**ï¼šç»™å¼€å‘ç¯å¢ƒè¡¥ Vite `server.proxy` é…ç½®ï¼ˆæˆ– `VITE_API_URL` è§„èŒƒï¼‰ï¼Œåˆ é™¤ import mapï¼Œæ›´æ–° [README.md](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/README.md)
2. **ä¿® P1**ï¼šè¡¥ `vite/client` ç±»å‹ + `typecheck` è„šæœ¬ï¼Œä¿è¯ `tsc --noEmit` é€šè¿‡
3. **ä¿® P1**ï¼šä¿®å¤ç™»å½• placeholder æ ¼å¼ä¸åç«¯éªŒè¯è§„åˆ™ä¸€è‡´
4. **ä¿® P1**ï¼šæ–°å¢ `status.ts` / [config.ts](file:///home/sinfor/Games/SteamLibrary/CODE/Meilisearch4TelegramSearchCKJ/webui-example/vite.config.ts) / `control.ts` API serviceï¼Œé€é¡µæ¥å…¥çœŸå®æ•°æ®
5. **ä¿® P2**ï¼šåˆ›å»º `index.css`ã€è¯„ä¼° CDN æœ¬åœ°åŒ–ã€å‡çº§å®¡è®¡æ¼æ´ä¾èµ–ã€ä¿®å¤ JSX è¯­æ³•é”™è¯¯
